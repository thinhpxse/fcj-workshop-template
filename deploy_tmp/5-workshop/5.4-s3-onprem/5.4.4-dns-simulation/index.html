<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.152.2">
    <meta
  name="description"
  content=""
/>
<meta name="author" content="thienlh@thienlu.com" />

    <link rel="icon" href="../../../images/favicon.png" type="image/png">

    <title>Configuring Hybrid DNS for Private Endpoint Resolution :: Internship Report</title>

    
    <link href="../../../css/nucleus.css?1765118996" rel="stylesheet">
    <link href="../../../css/fontawesome-all.min.css?1765118996" rel="stylesheet">
    <link href="../../../css/hybrid.css?1765118996" rel="stylesheet">
    <link href="../../../css/featherlight.min.css?1765118996" rel="stylesheet">
    <link href="../../../css/perfect-scrollbar.min.css?1765118996" rel="stylesheet">
    <link href="../../../css/auto-complete.css?1765118996" rel="stylesheet">
    <link href="../../../css/atom-one-dark-reasonable.css?1765118996" rel="stylesheet">
    <link href="../../../css/theme.css?1765118996" rel="stylesheet">
    <link href="../../../css/hugo-theme.css?1765118996" rel="stylesheet">
    
    <link href="../../../css/theme-workshop.css?1765118996" rel="stylesheet">
    
    

    <script src="../../../js/jquery-3.3.1.min.js?1765118996"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    

  </head>
  <body class="" data-url="../../../5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/">
    <nav
  id="sidebar"
  class="showVisitedLinks"
>
   
  <div id="header-wrapper">
    <div id="header"><a id="logo" href="../../../">
  <svg
    id="Layer_1"
    data-name="Layer 1"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 60 30"
    width="30%"
  >
    <defs>
      <style>
        .cls-1 {
          fill: #fff;
        }
        .cls-2 {
          fill: #f90;
          fill-rule: evenodd;
        }
      </style>
    </defs>
    <title>AWS-Logo_White-Color</title>
    <path
      class="cls-1"
      d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"
    ></path>
    <path
      class="cls-2"
      d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"
    ></path>
    <path
      class="cls-2"
      d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"
    ></path>
  </svg>
</a>
</div>
     <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../../js/lunr.min.js?1765118996"></script>
<script type="text/javascript" src="../../../js/auto-complete.js?1765118996"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/thinhpxse.github.io\/fcj-workshop-template\/";
    
</script>
<script type="text/javascript" src="../../../js/search.js?1765118996"></script> 
  </div>

  <div class="highlightable">
    <ul class="topics">
               
<li
  data-nav-id="/1-worklog/"
  title="Worklog"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../1-worklog/">
     <b> 1. </b> Worklog 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/1-worklog/1.2-week2/"
  title="Week 2 Worklog"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../1-worklog/1.2-week2/">
     <b> 1.2. </b> Week 2 Worklog 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/1-worklog/1.3-week3/"
  title="Week 3 Worklog – Migrate to AWS"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../1-worklog/1.3-week3/">
     <b> 1.x. </b> Week 3 Worklog – Migrate to AWS 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/1-worklog/1.4-week4/"
  title="Week 4 Worklog – Optimizing the System on AWS (Operations)"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../1-worklog/1.4-week4/">
     <b> 1.x. </b> Week 4 Worklog – Optimizing the System on AWS (Operations) 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/1-worklog/1.5-week5/"
  title="Week 5 Worklog"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../1-worklog/1.5-week5/">
     <b> 1.5. </b> Week 5 Worklog 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/1-worklog/1.6-week6/"
  title="Week 6 Worklog"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../1-worklog/1.6-week6/">
     <b> 1.6. </b> Week 6 Worklog 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/1-worklog/1.7-week7/"
  title="Week 7 Worklog"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../1-worklog/1.7-week7/">
     <b> 1.7. </b> Week 7 Worklog 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/1-worklog/1.8-week8/"
  title="Week 8 Worklog"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../1-worklog/1.8-week8/">
     <b> 1.8. </b> Week 8 Worklog 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/1-worklog/1.9-week9/"
  title="Week 9 Worklog"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../1-worklog/1.9-week9/">
     <b> 1.9. </b> Week 9 Worklog 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/1-worklog/1.10-week10/"
  title="Week 10 Worklog"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../1-worklog/1.10-week10/">
     <b> 1.10. </b> Week 10 Worklog 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/1-worklog/1.11-week11/"
  title="Week 11 Worklog"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../1-worklog/1.11-week11/">
     <b> 1.11. </b> Week 11 Worklog 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/1-worklog/1.12-week12/"
  title="Week 12 Worklog"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../1-worklog/1.12-week12/">
     <b> 1.12. </b> Week 12 Worklog 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
           
<li
  data-nav-id="/2-proposal/"
  title="Proposal"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../2-proposal/">
     <b> 2. </b> Proposal 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
           
<li
  data-nav-id="/3-blogstranslated/"
  title="Translated AWS Blogs"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../3-blogstranslated/">
     <b> 3. </b> Translated AWS Blogs 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/3-blogstranslated/3.6-blog6/"
  title="Build Priority-Based Message Processing with Amazon MQ and AWS App Runner"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../3-blogstranslated/3.6-blog6/">
     <b> 3.6. </b> Build Priority-Based Message Processing with Amazon MQ and AWS App Runner 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/3-blogstranslated/3.5-blog5/"
  title="Building an AI Gateway to Amazon Bedrock with Amazon API Gateway"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../3-blogstranslated/3.5-blog5/">
     <b> 3.5. </b> Building an AI Gateway to Amazon Bedrock with Amazon API Gateway 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/3-blogstranslated/3.3-blog3/"
  title="Electronic Arts tối ưu hóa quy trình cập nhật game với AWS"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../3-blogstranslated/3.3-blog3/">
     <b> 3.3. </b> Electronic Arts tối ưu hóa quy trình cập nhật game với AWS 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/3-blogstranslated/3.1-blog1/"
  title="Learn About Machine Learning on AWS"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../3-blogstranslated/3.1-blog1/">
     <b> 3.1. </b> Learn About Machine Learning on AWS 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/3-blogstranslated/3.2-blog2/"
  title="Revolutionizing Telecom Revenue Assurance with AWS AI-Driven Framework"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../3-blogstranslated/3.2-blog2/">
     <b> 3.2. </b> Revolutionizing Telecom Revenue Assurance with AWS AI-Driven Framework 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/3-blogstranslated/3.4-blog4/"
  title="Secure Amazon EVS with AWS Network Firewall"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../3-blogstranslated/3.4-blog4/">
     <b> 3.4. </b> Secure Amazon EVS with AWS Network Firewall 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
           
<li
  data-nav-id="/4-eventparticipated/"
  title="Events Participated"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../4-eventparticipated/">
     <b> 4. </b> Events Participated 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/4-eventparticipated/4.1-event1/"
  title="Event 1"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../4-eventparticipated/4.1-event1/">
     <b> 4.1. </b> Event 1 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/4-eventparticipated/4.2-event2/"
  title="Event 2"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../4-eventparticipated/4.2-event2/">
     <b> 4.2. </b> Event 2 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
           
<li
  data-nav-id="/5-workshop/"
  title="Workshop"
  class="dd-item 
        parent
        
        
        "
>
  <a href="../../../5-workshop/">
     <b> 5. </b> Workshop 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/5-workshop/5.1-workshop-overview/"
  title="Workshop Overview"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../5-workshop/5.1-workshop-overview/">
     <b> 5.1. </b> Workshop Overview 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/5-workshop/5.2-prerequiste/"
  title="Prerequisites"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../5-workshop/5.2-prerequiste/">
     <b> 5.2. </b> Prerequisites 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/5-workshop/5.3-s3-vpc/"
  title="Access S3 from VPC"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../5-workshop/5.3-s3-vpc/">
     <b> 5.3. </b> Access S3 from VPC 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/5-workshop/5.3-s3-vpc/5.3.1-create-gwe/"
  title="Creating Gateway Endpoint for S3"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../5-workshop/5.3-s3-vpc/5.3.1-create-gwe/">
     <b> 5.3.1 </b> Creating Gateway Endpoint for S3 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/5-workshop/5.3-s3-vpc/5.3.2-test-gwe/"
  title="Testing Gateway Endpoint Connectivity"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../5-workshop/5.3-s3-vpc/5.3.2-test-gwe/">
     <b> 5.3.2 </b> Testing Gateway Endpoint Connectivity 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
    
            
<li
  data-nav-id="/5-workshop/5.4-s3-onprem/"
  title="Access S3 from on-premises"
  class="dd-item 
        parent
        
        
        "
>
  <a href="../../../5-workshop/5.4-s3-onprem/">
     <b> 5.4. </b> Access S3 from on-premises 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/5-workshop/5.4-s3-onprem/5.4.1-prepare/"
  title="Environment Preparation for Hybrid Connectivity"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../5-workshop/5.4-s3-onprem/5.4.1-prepare/">
     <b> 5.4.1 </b> Environment Preparation for Hybrid Connectivity 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/5-workshop/5.4-s3-onprem/5.4.2-create-interface-enpoint/"
  title="Creating Interface VPC Endpoint for S3 Access"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../5-workshop/5.4-s3-onprem/5.4.2-create-interface-enpoint/">
     <b> 5.4.2 </b> Creating Interface VPC Endpoint for S3 Access 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/5-workshop/5.4-s3-onprem/5.4.3-test-endpoint/"
  title="Testing Interface Endpoint Connectivity from On-Premises"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../5-workshop/5.4-s3-onprem/5.4.3-test-endpoint/">
     <b> 5.4.3 </b> Testing Interface Endpoint Connectivity from On-Premises 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/"
  title="Configuring Hybrid DNS for Private Endpoint Resolution"
  class="dd-item 
        
        active
        
        "
>
  <a href="../../../5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/">
     <b> 5.4.4 </b> Configuring Hybrid DNS for Private Endpoint Resolution 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
    
            
<li
  data-nav-id="/5-workshop/5.5-policy/"
  title="Implementing Fine-Grained Access Control with VPC Endpoint Policies"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../5-workshop/5.5-policy/">
     <b> 5.5. </b> Implementing Fine-Grained Access Control with VPC Endpoint Policies 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/5-workshop/5.6-cleanup/"
  title="Resource Cleanup and Workshop Completion"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../5-workshop/5.6-cleanup/">
     <b> 5.6. </b> Resource Cleanup and Workshop Completion 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
           
<li
  data-nav-id="/6-self-evaluation/"
  title="Self-Assessment"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../6-self-evaluation/">
     <b> 6. </b> Self-Assessment 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
           
<li
  data-nav-id="/7-feedback/"
  title="Sharing and Feedback"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../7-feedback/">
     <b> 7. </b> Sharing and Feedback 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
    </ul>

     
    <section id="shortcuts">
      <h3>
        More
      </h3>
      <ul>
        
        <li>
          <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"
            ><i class='fab fa-facebook'></i> AWS Study Group</a
          >
        </li>
        
      </ul>
    </section>
     
    <section id="prefooter">
      <hr />
      <ul>
        
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
            <div class="select-style">
              <select id="select-language" onchange="location = this.value;">
                       
                <option
                  id="en"
                  value="https://thinhpxse.github.io/fcj-workshop-template/5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/"
                  selected
                >
                  English
                </option>
                            
                <option
                  id="vi"
                  value="https://thinhpxse.github.io/fcj-workshop-template/vi/5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/"
                >
                  Tiếng Việt
                </option>
                   
              </select>
              <svg
                version="1.1"
                id="Capa_1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                x="0px"
                y="0px"
                width="255px"
                height="255px"
                viewBox="0 0 255 255"
                style="enable-background: new 0 0 255 255"
                xml:space="preserve"
              >
                <g>
                  <g id="arrow-drop-down">
                    <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
                  </g>
                </g>
              </svg>
            </div>
          </a>
        </li>
         
        <li>
          <a class="padding" href="#" data-clear-history-toggle=""
            ><i class="fas fa-history fa-fw"></i> Clear History</a
          >
        </li>
        
      </ul>
    </section>
    
    <section id="footer"><left>
    
    <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0"
        title="Migrate" Alt="web counter" border="0" /></a> <br>
    <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0"
        title="Total CLoud Journey" Alt="web counter" border="0" />

</left>
<left>
    <br>
    <br>
    <b>Last Updated</b><br>
    <i>
        <span id="lastUpdated" style="color:orange;"></span>
    </i>

    <script>
        
        const today = new Date();
        
        const formattedDate = today.toLocaleDateString('en-GB');
        
        document.getElementById('lastUpdated').textContent = formattedDate;
    </script>
</left>
<left>
    <br>
    <br>
    <b> Team </b> <br>

    <i> <a href="https://www.facebook.com/groups/660548818043427" style="color:orange">First Cloud Journey </a> <br>

    </i>
</left>

<script async defer src="https://buttons.github.io/buttons.js"></script></section>
  </div>
</nav>



        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='../../../'>Internship Report</a> > <a href='../../../5-workshop/'>Workshop</a> > <a href='../../../5-workshop/5.4-s3-onprem/'>Access S3 from on-premises</a> > Configuring Hybrid DNS for Private Endpoint Resolution
          
        
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
  <div class="wrapper"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav></div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Configuring Hybrid DNS for Private Endpoint Resolution
            </h1>
          

        



	
<div
  class="notices warning"
  
>
  <p>⚠️ <strong>Important:</strong> The information provided here is for reference purposes only. Please <strong>do not copy verbatim</strong> for your report including this warning message.</p>

</div>

<p>In this section, you will configure the DNS infrastructure to enable seamless name resolution for S3 API calls from your on-premises environment. This simulates how enterprise networks use conditional DNS forwarding to resolve AWS service endpoints to private IP addresses.</p>
<p><strong>Why DNS Configuration Is Critical:</strong></p>
<p>AWS PrivateLink endpoints use elastic network interfaces (ENIs) with fixed private IP addresses in each Availability Zone. While these IPs remain stable for the endpoint&rsquo;s lifecycle, AWS strongly recommends using DNS resolution rather than hardcoding IPs because:</p>
<ul>
<li><strong>Dynamic AZ Management</strong>: ENIs may be added to new AZs or removed over time</li>
<li><strong>Automatic Failover</strong>: DNS allows automatic switching between AZ-specific IPs during outages</li>
<li><strong>Service Updates</strong>: AWS may update endpoint infrastructure requiring new IPs</li>
<li><strong>Best Practice</strong>: DNS provides abstraction and flexibility for enterprise architectures</li>
</ul>
<p><strong>What You&rsquo;ll Configure:</strong></p>
<ol>
<li><strong>DNS Alias Records</strong>: Map S3 service domains to Interface Endpoint IPs in Route 53 Private Hosted Zone</li>
<li><strong>Resolver Forwarding Rule</strong>: Direct on-premises DNS queries for S3 to the cloud VPC</li>
<li><strong>End-to-End Testing</strong>: Validate DNS resolution and S3 access using the simulated on-premises environment</li>
</ol>
<p>This configuration mimics real-world hybrid DNS architectures where on-premises DNS servers conditionally forward specific domains to AWS for private resolution.</p>
<hr>
<h4 id="part-1-create-dns-alias-records-for-interface-endpoint">Part 1: Create DNS Alias Records for Interface Endpoint</h4>
<p>You&rsquo;ll now create DNS records in the Route 53 Private Hosted Zone that map S3 service names to your Interface Endpoint&rsquo;s private IP addresses.</p>
<p><strong>Understanding the Private Hosted Zone:</strong></p>
<p>The CloudFormation stack you deployed earlier created a Private Hosted Zone for <code>s3.us-east-1.amazonaws.com</code>. This zone:</p>
<ul>
<li>Is associated only with your VPCs (not public)</li>
<li>Overrides public DNS resolution for S3 in your VPCs</li>
<li>Allows you to return private IPs instead of public IPs for S3 domains</li>
<li>Integrates with Route 53 Resolver for hybrid DNS</li>
</ul>
<p><strong>Step 1: Access Route 53 Hosted Zones</strong></p>
<ol>
<li>Open the <a href="https://us-east-1.console.aws.amazon.com/route53/v2/hostedzones?region=us-east-1">Route 53 Management Console</a> (Hosted Zones section)</li>
<li>You should see a Private Hosted Zone named <code>s3.us-east-1.amazonaws.com</code></li>
<li>Click on the <strong>hosted zone name</strong> to view its DNS records</li>
</ol>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/hosted-zone.png" alt="Route 53 Private Hosted Zone"></p>

<div
  class="notices info"
  
>
  <p><strong>Private Hosted Zone Indicator</strong>: You&rsquo;ll see &ldquo;Private&rdquo; listed under the Type column, and the Associated VPCs will show which VPCs use this zone for DNS resolution. This ensures only resources in your VPCs receive the private endpoint IPs.</p>

</div>

<p><strong>Step 2: Create Primary Alias Record</strong></p>
<p>You&rsquo;ll create an Alias record that points the base S3 domain to your Interface Endpoint.</p>
<ol>
<li>
<p><strong>Initiate record creation</strong>:</p>
<ul>
<li>Click the <strong>Create record</strong> button at the top</li>
</ul>
</li>
<li>
<p><strong>Configure the first record</strong>:</p>
<ul>
<li>
<p><strong>Record name</strong>: Leave blank (this creates a record for the zone apex: <code>s3.us-east-1.amazonaws.com</code>)</p>
</li>
<li>
<p><strong>Record type</strong>: Select <strong>A – IPv4 address</strong> (default)</p>
</li>
<li>
<p><strong>Alias configuration</strong>:</p>
<ul>
<li>Toggle the <strong>Alias</strong> switch to <strong>ON</strong> (enabled)</li>
<li>This tells Route 53 to alias to another AWS resource</li>
</ul>
</li>
<li>
<p><strong>Route traffic to</strong>:</p>
<ul>
<li>Choose <strong>Alias to VPC endpoint</strong> from the dropdown</li>
</ul>
</li>
<li>
<p><strong>Region</strong>:</p>
<ul>
<li>Select <strong>US East (N. Virginia) [us-east-1]</strong></li>
</ul>
</li>
<li>
<p><strong>Choose endpoint</strong>:</p>
<ul>
<li>Paste the <strong>Regional VPC Endpoint DNS name</strong> from your text editor</li>
<li>This is the DNS name you saved in section 5.4.3</li>
<li>Format: <code>vpce-xxxxxxxxx.s3.us-east-1.vpce.amazonaws.com</code></li>
</ul>
</li>
</ul>
</li>
</ol>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/create-record1.png" alt="Create Primary DNS Record"></p>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/record1.png" alt="Primary Record Configuration"></p>

<div
  class="notices tip"
  
>
  <p><strong>Alias vs CNAME</strong>: Using Alias records (instead of CNAME) provides benefits:</p>
<ul>
<li>Works at the zone apex (bare domain without subdomain)</li>
<li>No charge for Alias queries to AWS resources</li>
<li>Better performance with AWS service integration</li>
<li>Automatic health checking and failover support</li>
</ul>

</div>

<p><strong>Step 3: Create Wildcard Alias Record</strong></p>
<p>Now create a second record to handle all subdomains of the S3 service (e.g., <code>bucket.s3.us-east-1.amazonaws.com</code>).</p>
<ol>
<li>
<p><strong>Add another record</strong>:</p>
<ul>
<li>Click <strong>Add another record</strong> button (do not click Create yet)</li>
</ul>
</li>
<li>
<p><strong>Configure the wildcard record</strong>:</p>
<ul>
<li>
<p><strong>Record name</strong>: Enter <code>*</code> (asterisk - this creates a wildcard)</p>
</li>
<li>
<p><strong>Record type</strong>: Keep <strong>A – IPv4 address</strong></p>
</li>
<li>
<p><strong>Alias configuration</strong>:</p>
<ul>
<li>Toggle <strong>Alias</strong> to <strong>ON</strong></li>
</ul>
</li>
<li>
<p><strong>Route traffic to</strong>:</p>
<ul>
<li>Choose <strong>Alias to VPC endpoint</strong></li>
</ul>
</li>
<li>
<p><strong>Region</strong>:</p>
<ul>
<li>Select <strong>US East (N. Virginia) [us-east-1]</strong></li>
</ul>
</li>
<li>
<p><strong>Choose endpoint</strong>:</p>
<ul>
<li>Paste the same <strong>Regional VPC Endpoint DNS name</strong></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Create both records</strong>:</p>
<ul>
<li>Click <strong>Create records</strong> button</li>
<li>Both records will be created simultaneously</li>
</ul>
</li>
</ol>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/record2.png" alt="Wildcard DNS Record Configuration"></p>
<p><strong>Why Two Records?</strong></p>
<p>The two DNS records serve different purposes:</p>
<ol>
<li>
<p><strong>Apex Record</strong> (<code>s3.us-east-1.amazonaws.com</code>):</p>
<ul>
<li>Handles queries to the base S3 regional endpoint</li>
<li>Used by commands like: <code>aws s3 ls --endpoint-url https://s3.us-east-1.amazonaws.com</code></li>
</ul>
</li>
<li>
<p><strong>Wildcard Record</strong> (<code>*.s3.us-east-1.amazonaws.com</code>):</p>
<ul>
<li>Handles queries with bucket names in the subdomain</li>
<li>Matches: <code>bucket.s3.us-east-1.amazonaws.com</code>, <code>my-bucket.s3.us-east-1.amazonaws.com</code>, etc.</li>
<li>Used by path-style S3 URLs</li>
</ul>
</li>
</ol>
<p><strong>Step 4: Verify Record Creation</strong></p>
<p>After creation, you should see both records in the hosted zone:</p>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/result.png" alt="DNS Records Created Successfully"></p>
<p>Verify:</p>
<ul>
<li>Two new A records (apex and wildcard)</li>
<li>Both show Type: <strong>A - Alias</strong></li>
<li>Value points to your VPC endpoint</li>
</ul>

<div
  class="notices success"
  
>
  <p><strong>DNS Records Configured!</strong> These records ensure that when systems query for S3 domain names, they receive the private IP addresses of your Interface Endpoint ENIs instead of public S3 IPs.</p>

</div>

<hr>
<h4 id="part-2-create-route-53-resolver-forwarding-rule">Part 2: Create Route 53 Resolver Forwarding Rule</h4>
<p>Now you&rsquo;ll configure conditional DNS forwarding from the on-premises VPC to the cloud VPC. This simulates how on-premises DNS servers forward specific domains to AWS for resolution.</p>
<p><strong>Understanding Resolver Forwarding Rules:</strong></p>
<p>Route 53 Resolver Forwarding Rules enable:</p>
<ul>
<li><strong>Conditional forwarding</strong>: Only specific domains are forwarded (e.g., <code>s3.us-east-1.amazonaws.com</code>)</li>
<li><strong>Hybrid DNS</strong>: On-premises systems query their local DNS, which forwards to AWS</li>
<li><strong>Centralized management</strong>: Rules define which domains resolve through AWS</li>
<li><strong>Bidirectional resolution</strong>: Can forward both from AWS to on-prem and vice versa</li>
</ul>
<p>In this workshop:</p>
<ul>
<li>On-prem EC2 queries the <strong>Outbound Resolver</strong> in VPC On-prem</li>
<li>Outbound Resolver forwards S3 queries through VPN to <strong>Inbound Resolver</strong> in VPC Cloud</li>
<li>Inbound Resolver queries the Private Hosted Zone</li>
<li>Response with private IPs travels back to on-prem</li>
</ul>
<p><strong>Step 1: Retrieve Inbound Resolver IP Addresses</strong></p>
<p>First, you need the IP addresses where the Inbound Resolver is listening in VPC Cloud.</p>
<ol>
<li>
<p><strong>Navigate to Inbound Endpoints</strong>:</p>
<ul>
<li>From Route 53 console, click <strong>Resolver</strong> in left sidebar</li>
<li>Click <strong>Inbound endpoints</strong></li>
</ul>
</li>
<li>
<p><strong>Access endpoint details</strong>:</p>
<ul>
<li>Click on the <strong>Endpoint ID</strong> of the inbound endpoint</li>
<li>CloudFormation created this with a name like <code>VPCCloudInboundEndpoint</code></li>
</ul>
</li>
</ol>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/route53-1.png" alt="Route 53 Inbound Endpoint"></p>
<ol start="3">
<li><strong>Copy IP addresses</strong>:
<ul>
<li>In the endpoint details, scroll to the <strong>IP addresses</strong> section</li>
<li>You&rsquo;ll see <strong>2 IP addresses</strong> (one per AZ)</li>
<li><strong>Copy both IPs</strong> to your text editor</li>
<li>Format: <code>10.0.x.x</code> (within VPC Cloud CIDR)</li>
</ul>
</li>
</ol>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/route53-2.png" alt="Inbound Resolver IP Addresses"></p>

<div
  class="notices note"
  
>
  <p><strong>Multi-AZ Resolver</strong>: The Inbound Resolver has IPs in multiple AZs for high availability. The forwarding rule will use both, automatically failing over if one AZ becomes unavailable.</p>

</div>

<p><strong>Step 2: Create Forwarding Rule</strong></p>
<ol>
<li><strong>Navigate to Rules</strong>:
<ul>
<li>In Route 53 console, click <strong>Resolver</strong> &gt; <strong>Rules</strong> in left sidebar</li>
<li>Click <strong>Create rule</strong> button</li>
</ul>
</li>
</ol>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/route53-3.png" alt="Create Resolver Rule"></p>
<ol start="2">
<li>
<p><strong>Configure rule basics</strong>:</p>
<ul>
<li><strong>Name</strong>: Enter <code>S3-PrivateEndpoint-ForwardingRule</code></li>
<li><strong>Description</strong> (optional): &ldquo;Forward S3 DNS queries to VPC Cloud for private endpoint resolution&rdquo;</li>
<li><strong>Rule type</strong>: Select <strong>Forward</strong> (not System)</li>
<li><strong>Domain name</strong>: Enter <code>s3.us-east-1.amazonaws.com</code></li>
</ul>
</li>
</ol>
<p>This domain name tells the rule: &ldquo;Forward any DNS queries for this domain and its subdomains.&rdquo;</p>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/route53-4.png" alt="Forwarding Rule Basic Configuration"></p>
<p><strong>Step 3: Associate VPC and Outbound Endpoint</strong></p>
<ol start="3">
<li>
<p><strong>VPC Configuration</strong>:</p>
<ul>
<li>
<p><strong>VPCs to associate this rule with</strong>:</p>
<ul>
<li>Select <strong>VPC On-prem</strong> from the dropdown</li>
<li>This applies the rule to DNS queries originating in the on-premises VPC</li>
</ul>
</li>
<li>
<p><strong>Outbound endpoint</strong>:</p>
<ul>
<li>Select <strong>VPCOnpremOutboundEndpoint</strong></li>
<li>This is the resolver endpoint that forwards queries from VPC On-prem</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/route53-5.png" alt="VPC and Outbound Endpoint Association"></p>

<div
  class="notices info"
  
>
  <p><strong>Outbound Endpoint Role</strong>: The Outbound Resolver in VPC On-prem receives DNS queries from EC2 instances and forwards them through the VPN tunnel to the target IP addresses (the Inbound Resolver in VPC Cloud).</p>

</div>

<p><strong>Step 4: Specify Target IP Addresses</strong></p>
<ol start="4">
<li>
<p><strong>Add target IPs</strong>:</p>
<ul>
<li><strong>Target IP addresses</strong>: This is where forwarded queries will be sent</li>
<li>Click <strong>Add target IP address</strong></li>
<li><strong>IP address</strong>: Paste the <strong>first Inbound Resolver IP</strong> from your text editor</li>
<li>Click <strong>Add target IP address</strong> again</li>
<li><strong>IP address</strong>: Paste the <strong>second Inbound Resolver IP</strong></li>
<li>Both IPs should now be listed</li>
</ul>
</li>
<li>
<p><strong>Create the rule</strong>:</p>
<ul>
<li>Click <strong>Submit</strong> button</li>
</ul>
</li>
</ol>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/route53-6.png" alt="Target IP Configuration"></p>
<p><strong>Understanding the Target IPs:</strong></p>
<p>These are the Inbound Resolver IPs in VPC Cloud:</p>
<ul>
<li>They listen for DNS queries coming through the VPN</li>
<li>They query the Private Hosted Zone for answers</li>
<li>They return results back through the VPN to the Outbound Resolver</li>
</ul>
<p><strong>Step 5: Verify Rule Creation</strong></p>
<p>After creation, you should see your new forwarding rule:</p>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/route53-7.png" alt="Forwarding Rule Created Successfully"></p>
<p>Check that:</p>
<ul>
<li><strong>Status</strong> shows <strong>Active</strong></li>
<li><strong>Type</strong> shows <strong>Forward</strong></li>
<li><strong>Domain name</strong> is <code>s3.us-east-1.amazonaws.com</code></li>
<li><strong>VPC</strong> shows VPC On-prem</li>
</ul>

<div
  class="notices success"
  
>
  <p><strong>DNS Forwarding Configured!</strong> Queries from VPC On-prem for <code>s3.us-east-1.amazonaws.com</code> now forward through the Outbound Resolver, across the VPN tunnel, to the Inbound Resolver, and finally resolve through the Private Hosted Zone.</p>

</div>

<hr>
<h4 id="part-3-test-on-premises-dns-resolution">Part 3: Test On-Premises DNS Resolution</h4>
<p>Now validate that the entire DNS resolution chain is working correctly.</p>
<p><strong>Step 1: Connect to On-Premises Instance</strong></p>
<ol>
<li>Open <strong>AWS Systems Manager</strong> &gt; <strong>Session Manager</strong></li>
<li>Click <strong>Start session</strong></li>
<li>Select the <strong>Test-Interface-Endpoint</strong> EC2 instance (in VPC On-prem)</li>
<li>Click <strong>Start session</strong></li>
</ol>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/test1.png" alt="Connect to Test Instance"></p>
<p><strong>Step 2: Test DNS Resolution with Dig Command</strong></p>
<p>In the Session Manager terminal, run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dig +short s3.us-east-1.amazonaws.com
</span></span></code></pre></div><p><strong>Expected Output:</strong></p>
<p>You should see <strong>2 IP addresses</strong> returned:</p>
<pre tabindex="0"><code>10.0.1.100
10.0.2.100
</code></pre><p>(Your actual IPs will differ but should be in the VPC Cloud CIDR range)</p>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/dig.png" alt="DNS Resolution Test with Dig"></p>

<div
  class="notices note"
  
>
  <p><strong>Important Distinction</strong>: The IP addresses returned are the <strong>VPC Interface Endpoint ENI IPs</strong>, NOT the Inbound Resolver IPs you configured. Both sets of IPs are in the VPC Cloud CIDR block, but they serve different purposes:</p>
<ul>
<li><strong>Inbound Resolver IPs</strong>: Handle DNS queries (not returned in dig results)</li>
<li><strong>Interface Endpoint IPs</strong>: Where S3 API traffic is sent (returned by DNS queries)</li>
</ul>

</div>

<p><strong>What Just Happened:</strong></p>
<p>The <code>dig</code> command triggered this DNS resolution flow:</p>
<pre tabindex="0"><code>EC2 On-prem → Outbound Resolver (VPC On-prem) 
→ VPN Tunnel → Inbound Resolver (VPC Cloud) 
→ Private Hosted Zone → Alias Record 
→ Interface Endpoint IPs → Response back to EC2
</code></pre><p><strong>Step 3: Verify IPs Match Interface Endpoint</strong></p>
<p>Cross-check the IPs returned by dig against the actual Interface Endpoint:</p>
<ol>
<li>
<p><strong>Open VPC Console</strong>:</p>
<ul>
<li>Navigate to <strong>VPC</strong> &gt; <strong>Endpoints</strong></li>
<li>Click on your <strong>S3 Interface Endpoint</strong></li>
</ul>
</li>
<li>
<p><strong>Check Subnets tab</strong>:</p>
<ul>
<li>Click the <strong>Subnets</strong> tab</li>
<li>You&rsquo;ll see ENI IDs and their associated private IPs</li>
<li><strong>Verify</strong> these IPs match those returned by the dig command</li>
</ul>
</li>
</ol>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/subnet.png" alt="Verify Endpoint IPs in VPC Console"></p>
<p>The IPs should match perfectly, confirming DNS resolution is working correctly.</p>

<div
  class="notices success"
  
>
  <p><strong>DNS Resolution Validated!</strong> Your on-premises environment is successfully resolving S3 domain names to private Interface Endpoint IPs through the hybrid DNS architecture.</p>

</div>

<p><strong>Step 4: Test S3 API Access via DNS</strong></p>
<p>Now test that applications can use the standard S3 endpoint URL and automatically connect through the private endpoint.</p>
<p>In the Session Manager terminal, run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>aws s3 ls --endpoint-url https://s3.us-east-1.amazonaws.com
</span></span></code></pre></div><p><strong>Expected Output:</strong></p>
<p>You should see a list of your S3 buckets, including the test bucket created earlier.</p>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/endpoint.png" alt="S3 Access via Standard Endpoint URL"></p>
<p><strong>Key Observation:</strong></p>
<p>Notice you&rsquo;re now using the <strong>standard S3 endpoint URL</strong> (<code>https://s3.us-east-1.amazonaws.com</code>), not the VPC endpoint-specific URL you used in section 5.4.3. This is possible because:</p>
<ol>
<li>DNS resolves <code>s3.us-east-1.amazonaws.com</code> to Interface Endpoint private IPs</li>
<li>HTTPS traffic routes through VPN to the Interface Endpoint</li>
<li>Applications don&rsquo;t need to be aware of the private endpoint configuration</li>
<li>Standard AWS SDKs and CLI work without modification</li>
</ol>
<p>This demonstrates the power of DNS-based private endpoint resolution!</p>

<div
  class="notices tip"
  
>
  <p><strong>Production Benefit</strong>: In enterprise environments, applications can use standard AWS service endpoints in their code. The DNS infrastructure automatically directs traffic through private endpoints when running on-premises or in VPCs, and through internet when running elsewhere (with appropriate routing).</p>

</div>

<p><strong>Step 5: Clean Up Session</strong></p>
<ol>
<li>
<p>Terminate your Session Manager session by typing:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>exit
</span></span></code></pre></div></li>
<li>
<p>Or close the browser tab</p>
</li>
</ol>
<p><img src="../../../images/5-Workshop/5.4-S3-onprem/terminal.png" alt="Terminate Session"></p>
<hr>
<h4 id="understanding-your-hybrid-dns-architecture">Understanding Your Hybrid DNS Architecture</h4>
<p><strong>Complete Traffic Flow:</strong></p>
<p>When an on-premises application accesses S3, this is the complete flow:</p>
<p><strong>DNS Resolution Path:</strong></p>
<pre tabindex="0"><code>┌──────────────────────┐
│ On-Prem Application  │
│ Queries: s3.us-...   │
└──────────┬───────────┘
           │
           ▼
┌──────────────────────┐
│ EC2 Instance         │
│ DNS Resolver Config  │
└──────────┬───────────┘
           │
           ▼
┌──────────────────────┐
│ Outbound Resolver    │
│ (VPC On-prem)        │
│ Forwarding Rule:     │
│ s3.us-east-1.*       │
└──────────┬───────────┘
           │
           │ VPN Tunnel
           ▼
┌──────────────────────┐
│ Inbound Resolver     │
│ (VPC Cloud)          │
│ IPs: 10.0.x.x        │
└──────────┬───────────┘
           │
           ▼
┌──────────────────────┐
│ Private Hosted Zone  │
│ s3.us-east-1.*.com   │
│ Alias Records        │
└──────────┬───────────┘
           │
           ▼
┌──────────────────────┐
│ Returns: 10.0.1.100  │
│          10.0.2.100  │
│ (Endpoint ENI IPs)   │
└──────────────────────┘
</code></pre><p><strong>Data Path (After DNS Resolution):</strong></p>
<pre tabindex="0"><code>On-Prem Application → Interface Endpoint Private IP 
→ VPN Tunnel → VPC Cloud → Interface Endpoint ENI 
→ AWS PrivateLink → S3 Service
</code></pre><hr>
<h4 id="key-accomplishments">Key Accomplishments</h4>
<p><strong>What You&rsquo;ve Built:</strong></p>
<p>✅ <strong>DNS Alias Records</strong>: Mapped S3 domains to Interface Endpoint private IPs<br>
✅ <strong>Conditional Forwarding</strong>: Configured forwarding rule for S3 domain from on-prem to cloud<br>
✅ <strong>Hybrid DNS Resolution</strong>: Enabled seamless DNS resolution across VPN<br>
✅ <strong>Transparent S3 Access</strong>: Applications use standard S3 endpoints with private routing<br>
✅ <strong>High Availability</strong>: Multi-AZ DNS and endpoint configuration for fault tolerance</p>
<p><strong>Enterprise Architecture Patterns:</strong></p>
<ol>
<li><strong>Conditional DNS Forwarding</strong>: Split-brain DNS with domain-specific forwarding</li>
<li><strong>Private Hosted Zones</strong>: Override public DNS for AWS services with private IPs</li>
<li><strong>Alias Records</strong>: Efficient DNS routing to AWS resources</li>
<li><strong>Resolver Endpoints</strong>: Hybrid DNS bridge between on-prem and cloud</li>
<li><strong>Multi-AZ Resilience</strong>: Automatic failover for DNS and endpoints</li>
</ol>
<p><strong>Production Enhancements:</strong></p>
<p>For real-world deployments, consider:</p>
<ul>
<li><strong>DNS caching strategies</strong> to reduce resolver query load</li>
<li><strong>Monitoring CloudWatch metrics</strong> for Resolver query counts and latency</li>
<li><strong>Multiple forwarding rules</strong> for different AWS services (EC2, RDS, etc.)</li>
<li><strong>DNS failback to public resolution</strong> if private endpoints are unavailable</li>
<li><strong>Integration with on-premises DNS servers</strong> (BIND, Active Directory, etc.)</li>
<li><strong>DNS query logging</strong> for security auditing and troubleshooting</li>
<li><strong>Route 53 Resolver Query Logging</strong> enabled for compliance</li>
</ul>
<p>This hybrid DNS architecture provides enterprise-grade private connectivity to AWS services while maintaining standard application code and AWS SDK usage!</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="../../../5-workshop/5.4-s3-onprem/5.4.3-test-endpoint/" title="Testing Interface Endpoint Connectivity from On-Premises"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../../5-workshop/5.5-policy/" title="Implementing Fine-Grained Access Control with VPC Endpoint Policies" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../../js/clipboard.min.js?1765118996"></script>
    <script src="../../../js/perfect-scrollbar.min.js?1765118996"></script>
    <script src="../../../js/perfect-scrollbar.jquery.min.js?1765118996"></script>
    <script src="../../../js/jquery.sticky.js?1765118996"></script>
    <script src="../../../js/featherlight.min.js?1765118996"></script>
    <script src="../../../js/highlight.pack.js?1765118996"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../../js/modernizr.custom-3.6.0.js?1765118996"></script>
    <script src="../../../js/learn.js?1765118996"></script>
    <script src="../../../js/hugo-learn.js?1765118996"></script>

    <link href="../../../mermaid/mermaid.css?1765118996" rel="stylesheet" />
    <script src="../../../mermaid/mermaid.js?1765118996"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function (i, s, o, g, r, a, m) {
    i["GoogleAnalyticsObject"] = r;
    ((i[r] =
      i[r] ||
      function () {
        (i[r].q = i[r].q || []).push(arguments);
      }),
      (i[r].l = 1 * new Date()));
    ((a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]));
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m);
  })(
    window,
    document,
    "script",
    "https://www.google-analytics.com/analytics.js",
    "ga",
  );

  ga("create", "UA-158079754-2", "auto");
  ga("send", "pageview");
</script>

  </body>
</html>
